package com.example.miniprogect1.controller;import com.example.miniprogect1.Service.CashService;import com.example.miniprogect1.Service.UserService;import com.example.miniprogect1.domain.User;import com.example.miniprogect1.domain.UserDotori;import com.example.miniprogect1.repository.CashRepository;import com.example.miniprogect1.repository.MemberRepository;import jakarta.servlet.http.HttpSession;import lombok.RequiredArgsConstructor;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.servlet.ModelAndView;import java.util.ArrayList;import java.util.List;@Controller@RequiredArgsConstructorpublic class HomeController {    private final CashService cashService;    private final MemberRepository memberRepository;    private final CashRepository cashRepository;    private final UserService userService;    @GetMapping("/cash")    public String cashList(Model model, HttpSession session) {        User loginUser = (User) session.getAttribute("loginUser");        List<UserDotori> top5PositiveValues = cashService.findAll(loginUser.getUserName(), 0L);        List<UserDotori> filteredList = new ArrayList<>();        for (UserDotori user : top5PositiveValues) {            String username = user.getUserName();            if (username != null && username.equals(loginUser.getUserName())) {                filteredList.add(user);            }        }        List<UserDotori> userList1 = cashService.finddotori();        int sum = 0;        for (UserDotori user : userList1) {            String username = user.getUserName();            if (username != null && username.equals(loginUser.getUserName())) {                sum += user.getDotori();            }        }        loginUser.setBamtori(sum);        userService.saveBamtori(loginUser);        memberRepository.updateBamtori(sum, loginUser.getUserName());        List<Integer> num = new ArrayList<>();        model.addAttribute("userList", filteredList);        model.addAttribute("sumDotori", sum);        model.addAttribute("number", num);        return "index"; // Assuming the view name is "index.html"    }}