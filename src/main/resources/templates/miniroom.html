<!DOCTYPE html><html lang="en"><head>  <meta charset="UTF-8">  <meta http-equiv="X-UA-Compatible" content="IE=edge">  <meta name="viewport" content="width=device-width, initial-scale=1.0">  <link rel="preconnect" href="https://fonts.googleapis.com">  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>  <link href="https://fonts.googleapis.com/css2?family=Hi+Melody&family=Libre+Baskerville&family=Single+Day&family=Stylish&display=swap"        rel="stylesheet">  <title>Title</title>  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">  <script src="https://code.jquery.com/jquery-3.7.0.js"></script>  <style>    body {      font-family: 'Stylish', sans-serif;    }    #banner {      width: 100%;      height: 50px;      background-color: orange;      display: flex;      align-items: center;    }    .bannerbutton {      width: 12%;      background-color: #eaa013;      height: 100%;      align-items: center;      text-align: center;      display: flex;      justify-content: center;      border: solid white 3px;      margin-right: 5px;      font-size: 19px;      color: #ffffff;      text-shadow: -1px 0 #000, 0 1px #000, 1px 0 #000, 0 -1px #000;    }    #content {      display: flex;      justify-content: center;    }    #chargebox {      width: 900px;      height: 600px;      background-color: #ffffff;      border: solid orange 3px;      display: flex;    }    .leftbanner {      width: 100px;      height: 40px;      background-color: #ffb571;      color: white;      border-radius: 2px;      text-align: center;      display: flex;      justify-content: center;      align-items: center;      margin-top: 4px;      border: solid #ff8d1c 1px;    }    #chargebox {      display: flex;      align-items: center;      justify-content: center;      border-radius: 8px;    }    #back {      position: relative;      height: 1000px;      background-image: url('https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fs4RlP%2FbtskQjr1WRj%2FVGu2w6gF1Pm7qMg7SCUZt1%2Fimg.png');      background-color: rgba(255, 255, 255, 0.1); /* adjust opacity here */    }    td {      border-left: solid #ff8d1c 1px;      padding-right: 5px;      padding-left: 5px;    }    #bigPreviewDiv::-webkit-scrollbar {      height: 7px;  /* 스크롤바의 너비 */    }    #bigPreviewDiv::-webkit-scrollbar-thumb {      /*height: 30%; !* 스크롤바의 길이 *!*/      background: orange; /* 스크롤바의 색상 */      border-radius: 10px;    }    #bigPreviewDiv::-webkit-scrollbar-track {      background: rgba(33, 122, 244, .1);  /*스크롤바 뒷 배경 색상*/    }    #secondbox::-webkit-scrollbar {      width: 7px;  /* 스크롤바의 너비 */    }    #secondbox::-webkit-scrollbar-thumb {      height: 10px; /* 스크롤바의 길이 */      background: orange; /* 스크롤바의 색상 */      border-radius: 10px;    }    #secondbox::-webkit-scrollbar-track {      background: rgba(33, 122, 244, .1);  /*스크롤바 뒷 배경 색상*/    }  </style></head><body><div id="banner">  <div id="mingyupush" style="width: 24%"></div>  <div  onclick="window.location.href='/home'" style="height: 100%">    <img id="logo"         src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcdF9J4%2FbtskRufcTKP%2FmAHqe1WxB0eyLRqjxKR5kK%2Fimg.png"         style="height: 100%; cursor: pointer;" alt="">  </div>  <div class="bannerbutton " style="cursor: pointer" id="myroom" onclick="window.location.href='/myPage'" >마이룸</div>  <div class="bannerbutton" style="background-color: rgba(255,209,190,0.81); cursor: pointer" onclick="window.location.href='/miniroom'">구매</div>  <div class="bannerbutton" style="cursor: pointer"  id="charge" onclick="window.location.href='/cash'">충전</div>  <div class="logoutbox" style="position: absolute; top: 10px;right: 11px; cursor: pointer ">    <p style="margin-bottom: 3px;margin-top: 4px;font-size: 13px;            color: #5e5c5c;"th:text="${session.loginUser.userName} + '님 환영합니다'"></p>    <button id="logout"            style=" background-color: white; height: 20px; width: 80px; text-align: center; display: flex; justify-content: center; align-items: center; border-radius: 4px; position: absolute;right: 0; cursor: pointer;" onclick="confirmLogout()">      로그아웃    </button>  </div></div><p style="font-size: 4px"></p><div style="background-color: #ea8a8a;height: 4px; margin-top: 4px"></div><div style=" height: 800px" id="back">  <!--    한줄 띄고-->  <div style="height: 50px"></div>  <div id="content">    <div>      <div class="leftbanner" style="font-weight: bold; cursor: pointer"           onclick="window.location.href='/miniroom'">        마이룸      </div>      <div class="leftbanner" style="background-color: white;color: #c71a01;font-weight: bold; cursor: pointer"           onclick="window.location.href='/bgm'">        BGM      </div>    </div>    <!--        전체상자-->    <div id="chargebox" style="display: flex;">      <div style="width: 8%; height: 90%; background-color: #ffffff; margin-right: 7px;display: flex;align-items: center;justify-content: center;flex-direction: column; border: solid #ff8d1c 1px; margin-left: 10px">        <button id="wallpaperBtn" style="width: 55px; height: 30px; margin-bottom: 20px; background-color: white; border-radius: 5px; border: solid #ff8d1c 0.5px; cursor: pointer;">          벽지        </button>        <button id="furnitureBtn" style="width: 55px; height: 30px; margin-bottom: 20px; background-color: white; border-radius: 5px; border: solid #ff8d1c 0.5px; cursor: pointer;">          가구        </button>        <button id="minimiBtn" style="width: 55px; height: 30px; margin-bottom: 20px; background-color: white; border-radius: 5px; border: solid #ff8d1c 0.5px; font-size: 13px; cursor: pointer;">          미니미        </button>      </div>      <!-- 가로로두번쨰박스-->      <div class="secondbox" id="secondbox"           style="width: 350px; height: 90%; background-color: #ffffff; margin-right: 7px;display: flex; flex-wrap: wrap; padding: 10px; justify-content: center; overflow-y: scroll;">      </div>      <!--오른쪽박스-->      <div style="width: 450px; height: 600px; background-color: #ffffff; margin-right: 7px; display: flex; justify-content: center; flex-direction: column; align-items: center">        <!--    오른쪽박스 안 첫번째박스-->        <div id="imageContainer"             style="width: 450px; height: 350px; background-color: #ffffff; display: flex; align-items: center; flex-direction: column; position: relative;">          <div style="margin-bottom: 10px; font-size: 25px">전시장</div>          <!--        미니룸 이미지-->          <div id="img_pre" style="width: 450px; height: 300px; overflow: hidden; position: relative; border: solid orange 1px; text-align: center; font-size: 30px; display: flex; justify-content: center; align-items: center;">            <img src="" alt="">            <p>아이템을 골라봐!</p>          </div>        </div>        <!--    오른쪽박스 안 두번째박스-->        <div style="margin-bottom: 10px;font-size: 25px">내꺼야!</div>        <!--    아래에 벽지아이템 나열-->        <div id="bigPreviewDiv" style="width: 430px; height: 150px; background-color: #ffffff; display: flex; overflow-x: scroll; white-space: nowrap; justify-content: space-between; align-items: center; border: solid orange 1px; padding-left: 10px; padding-right: 10px; ">          <!--                    아이템을 나열할 상자-->          <div id="previewDiv" style="display: flex;">            <!--                        아이템 나열중-->            <div style="width: 70px;height: 70px;background-color: #ffffff;border: solid white 2px;            display: flex; flex-direction: column;justify-content: center;align-items: center; flex-wrap: nowrap; margin: 4px">            </div>          </div>        </div>      </div>    </div>  </div></div></div></body><script>  function confirmLogout() {    if (confirm("정말 로그아웃 하시겠습니까?")) {      // "Yes"를 선택한 경우 로그아웃을 수행하는 URL로 리다이렉트      window.location.href = "/logout";    } else {      // "No"를 선택한 경우 아무 동작도 수행하지 않음    }  }  let productlist = [];  function productList(pcId) {    $.ajax({      url: '/product',      type: 'post',      data: {        pcId: pcId      },      success: function (obj2) {        let previewDiv = $(".secondbox");        previewDiv.empty();        for (let i = 0; i < obj2.length; i++) {          productlist.push(obj2[i].productName);          let product = obj2[i];          let productFileName = product.productFileName;          let productName = product.productName;          let productPrice = product.productPrice;          // 동적으로 생성된 HTML 요소 생성          let furnitureItem = $('<div class="furnitureitem"></div>').css({            width: '130px',            height: '130px',            backgroundColor: '#ffffff',            border: 'solid white 1px',            display: 'flex',            flexDirection: 'column',            justifyContent: 'center',            alignItems: 'center',            margin: '3px',            cursor: 'pointer'          });          let imgWidth = '130px';          let imgHeight = '75px';          if (pcId === 2) {            imgWidth = '60px';            imgHeight = '70px';          } else if (pcId === 3) {            imgWidth = '40px';            imgHeight = '65px';          }          let productImg = $('<img/>').attr({            src: productFileName,            width: imgWidth,            height: imgHeight,            id: 'wallpaper',            'data-pcid': pcId,            'data-x': product.coordinateX,            'data-y': product.coordinateY          }).click(function () {            let src = this.src;            let pcId = $(this).data("pcid");            let coordinateX = $(this).data("x");  // 좌표값을 읽어옵니다            let coordinateY = $(this).data("y");  // 좌표값을 읽어옵니다            addImageToContainer(src, pcId, coordinateX, coordinateY); // 좌표값을 인수로 전달합니다          });          let productNameDiv = $('<div></div>').text(productName).css('font-size', '15px');          let productPriceDiv = $('<div></div>').text('도토리' + productPrice + '개').css('font-size', '15px');          let purchaseBtn = $('<button onclick="purchase(' + obj2[i].pid + ',' + obj2[i].pcId + ')">구매</button>').attr('id', 'purchase_wallpaper' + obj2[i].pid).css({            width: '80px',            height: '20px',            fontSize: '15px',            textAlign: 'center',            cursor: 'pointer',            borderRadius: '4px',            border: '1px solid orange'          });          // 동적으로 생성된 HTML 요소를 previewDiv에 추가          furnitureItem.append(productImg, productNameDiv, productPriceDiv, purchaseBtn);          previewDiv.append(furnitureItem);        }        purchasedProduct(pcId);      },      error: function (xhr, status, error) {        console.log(error);      }    });  }  function purchasedProduct(pcId) {    $.ajax({      url: '/preview',      type: 'post',      data: {        pcId: pcId      },      dataType: "json",      success: function (obj) {        //compare();        if (obj.errorMessage === "Ok") {          let previewDiv = $("#previewDiv");          previewDiv.empty();          let cnt = 0;          for (let i = 0; i < productlist.length; i++) {            for (let j = 0; j < obj.items.length; j++) {              if (productlist[i] == obj.items[j].product_name) {                cnt++;                $('#purchase_wallpaper' + obj.items[j].p_id).prop('disabled', true);              }            }          }          console.log(cnt);          for (let i = 0; i < obj.items.length; i++) {            let productFileName = obj.items[i].product_file_name;            let productName = obj.items[i].product_name;            let displayingDiv = $("<div>").css({              width: "90px",              backgroundColor: "#fff",              border: "solid white 2px",              display: "flex",              flexDirection: "column",              justifyContent: "center",              alignItems: "center",              flexWrap: "nowrap",              margin: "4px"            });            let imageElement = $("<img>").attr("src", productFileName).css({              height: "50px",              alignSelf: "center"            });            let productDiv = $("<div>").text(productName).css({              fontSize: "15px",              textAlign: "center"            });            displayingDiv = displayingDiv.append(imageElement, productDiv)            previewDiv.append(displayingDiv);          }        } else {          location.href = "/login";        }      },      error: function (xhr, status, error) {        console.log(error);      }    })  }  function addImageToContainer(src, pcId, coordinateX, coordinateY) {    let imgPre = document.getElementById("img_pre");    let img = document.createElement("img");    img.src = src;    img.style.position = "absolute";    img.style.cursor = "pointer";    if (pcId === 2) {      img.style.width = "20%";      img.style.height = "20%";      img.style.zIndex = "2";      img.style.left = coordinateX - 50 + "px";  // 좌표 X 값을 적용합니다      img.style.top = coordinateY + "px";   // 좌표 Y 값을 적용합니다    } else if (pcId === 1) {      img.style.width = "100%";      img.style.height = "100%";      img.style.zIndex = "1";      img.style.left = coordinateX + "px";  // 좌표 X 값을 적용합니다      img.style.top = coordinateY + "px";   // 좌표 Y 값을 적용합니다    } else {      img.style.width = "20%";      img.style.height = "20%";      img.style.zIndex = "3";      img.style.left = coordinateX - 50 +"px";  // 좌표 X 값을 적용합니다      img.style.top = coordinateY + "px";   // 좌표 Y 값을 적용합니다    }    img.style.objectFit = "contain";    img.onclick = function () {      removeImage(this);    };    imgPre.appendChild(img);  }  function removeImage(image) {    image.remove(); // 이미지 요소를 제거합니다.  }  function purchase(pId, pcid) {    var confirmation = confirm("구매하시겠습니까?");    if (confirmation) {      $.ajax({        url: '/purchase',        type: 'post',        data: {pId: pId},        success: (obj) => {          if (obj.item.msg === "complete") {            alert("구매가 완료되었습니다.");            purchasedProduct(pcid);            // compare();          } else {            alert("밤토리가 부족합니다.");            location.href = "/cash";          }        },        error: (err) => {          console.log(err);        }      });    } else {      console.log("구매가 취소되었습니다.");    }  }  $(document).ready(function () {    $("#wallpaperBtn").click(function () {      productList(1);    });    $("#furnitureBtn").click(function () {      productList(2);    });    $("#minimiBtn").click(function () {      productList(3);    });    // 페이지가 로드될 때 productList 함수를 호출합니다.    productList(1);  });  const wallpaperBtn = document.getElementById('wallpaperBtn');  const furnitureBtn = document.getElementById('furnitureBtn');  const minimiBtn = document.getElementById('minimiBtn');  wallpaperBtn.addEventListener('click', function() {    resetButtonStyles();    wallpaperBtn.style.backgroundColor = 'orange';  });  furnitureBtn.addEventListener('click', function() {    resetButtonStyles();    furnitureBtn.style.backgroundColor = 'orange';  });  minimiBtn.addEventListener('click', function() {    resetButtonStyles();    minimiBtn.style.backgroundColor = 'orange';  });  function resetButtonStyles() {    wallpaperBtn.style.backgroundColor = 'white';    furnitureBtn.style.backgroundColor = 'white';    minimiBtn.style.backgroundColor = 'white';  }</script></html>